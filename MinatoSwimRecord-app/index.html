<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="競泳記録管理・分析・目標設定アプリケーション">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>🏊‍♂️ MinatoSwimRecord - 競泳記録管理アプリ - 202501081355</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .header h1 {
            color: #2563eb;
            font-size: 2.2em;
            margin-bottom: 8px;
        }

        .header p {
            color: #666;
            font-size: 1em;
        }

        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 15px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            min-width: 80px;
            padding: 12px 8px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
            color: #666;
            white-space: nowrap;
            touch-action: manipulation;
        }

        .nav-tab.active {
            background: #2563eb;
            color: white;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .nav-tab:hover:not(.active) {
            background: rgba(37, 99, 235, 0.1);
            color: #2563eb;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            min-height: 400px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #333;
            font-size: 0.95em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: white;
            min-height: 48px;
            touch-action: manipulation;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2563eb;
        }

        .btn {
            padding: 12px 20px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            touch-action: manipulation;
            min-height: 48px;
        }

        .btn:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-danger {
            background: #dc2626;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
            padding: 8px 12px;
            font-size: 14px;
            min-height: 36px;
        }

        .btn-danger:hover {
            background: #b91c1c;
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .record-table-container {
            overflow-x: auto;
            margin-top: 15px;
            border-radius: 8px;
            background: white;
            -webkit-overflow-scrolling: touch;
        }

        .record-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .record-table th,
        .record-table td {
            padding: 10px 8px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9em;
        }

        .record-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
            position: sticky;
            top: 0;
        }

        .record-table tr:hover {
            background: rgba(37, 99, 235, 0.05);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .stat-card p {
            font-size: 0.95em;
            opacity: 0.9;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1em;
        }

        .loading::after {
            content: '...';
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0%, 33% { content: '.'; }
            34%, 66% { content: '..'; }
            67%, 100% { content: '...'; }
        }

        .install-prompt {
            background: rgba(37, 99, 235, 0.1);
            border: 2px solid #2563eb;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        .install-prompt.show {
            display: block;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 5px;
            }
            
            .header {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .nav-tabs {
                padding: 3px;
            }
            
            .nav-tab {
                padding: 10px 6px;
                font-size: 0.8em;
            }
            
            .content {
                padding: 15px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-card h3 {
                font-size: 1.6em;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .record-table th,
            .record-table td {
                padding: 8px 4px;
                font-size: 0.8em;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .nav-tab {
                font-size: 0.75em;
                padding: 8px 4px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="install-prompt" id="install-prompt">
        <p>📱 このアプリをホーム画面に追加できます！</p>
        <button class="btn" onclick="installApp()">アプリをインストール</button>
        <button class="btn" onclick="hideInstallPrompt()" style="background: #6b7280; margin-left: 10px;">後で</button>
    </div>

    <div class="container">
        <div class="header">
            <h1>🏊‍♂️ MinatoSwimRecord</h1>
            <p>競泳記録管理・分析・目標設定アプリケーション</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">📊 ダッシュボード</button>
            <button class="nav-tab" onclick="showTab('records')">📝 記録一覧</button>
            <button class="nav-tab" onclick="showTab('add-record')">➕ 記録追加</button>
            <button class="nav-tab" onclick="showTab('analysis')">📈 分析</button>
            <button class="nav-tab" onclick="showTab('data-manager')">💾 データ管理</button>
        </div>

        <div class="content">
            <div id="dashboard" class="tab-content active">
                <h2>📊 ダッシュボード</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="total-records">-</h3>
                        <p>総記録数</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="best-time">-</h3>
                        <p>ベストタイム(バタフライ50m)</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="competitions">-</h3>
                        <p>参加大会数</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="first-places">-</h3>
                        <p>1位獲得数</p>
                    </div>
                </div>
            </div>

            <div id="records" class="tab-content">
                <h2>📝 記録一覧</h2>
                <div class="form-row" style="margin-bottom: 15px;">
                    <select id="filter-stroke" onchange="filterRecords()">
                        <option value="">全種目</option>
                        <option value="バタフライ">バタフライ</option>
                        <option value="自由形">自由形</option>
                        <option value="背泳ぎ">背泳ぎ</option>
                        <option value="平泳ぎ">平泳ぎ</option>
                        <option value="個人メドレー">個人メドレー</option>
                    </select>
                    <select id="filter-distance" onchange="filterRecords()">
                        <option value="">全距離</option>
                        <option value="50">50m</option>
                        <option value="100">100m</option>
                        <option value="200">200m</option>
                    </select>
                </div>
                <div class="record-table-container">
                    <table class="record-table" id="records-table">
                        <thead>
                            <tr>
                                <th>日付</th>
                                <th>種目</th>
                                <th>距離</th>
                                <th>プール</th>
                                <th>タイム</th>
                                <th>大会名</th>
                                <th>順位</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="records-tbody">
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="add-record" class="tab-content">
                <h2>➕ 記録追加</h2>
                <form id="record-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="date">日付</label>
                            <input type="date" id="date" name="date" required>
                        </div>
                        <div class="form-group">
                            <label for="stroke">種目</label>
                            <select id="stroke" name="stroke" required>
                                <option value="">選択してください</option>
                                <option value="自由形">自由形</option>
                                <option value="背泳ぎ">背泳ぎ</option>
                                <option value="平泳ぎ">平泳ぎ</option>
                                <option value="バタフライ">バタフライ</option>
                                <option value="個人メドレー">個人メドレー</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="distance">距離</label>
                            <select id="distance" name="distance" required>
                                <option value="">選択してください</option>
                                <option value="25">25m</option>
                                <option value="50">50m</option>
                                <option value="100">100m</option>
                                <option value="200">200m</option>
                                <option value="400">400m</option>
                                <option value="800">800m</option>
                                <option value="1500">1500m</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pool">プール</label>
                            <select id="pool" name="pool" required>
                                <option value="">選択してください</option>
                                <option value="短水路">短水路(25m)</option>
                                <option value="長水路">長水路(50m)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="time">タイム</label>
                            <input type="text" id="time" name="time" placeholder="例: 26.15" required>
                        </div>
                        <div class="form-group">
                            <label for="rank">順位</label>
                            <input type="text" id="rank" name="rank" placeholder="例: 1位">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="competition">大会名</label>
                        <input type="text" id="competition" name="competition" placeholder="例: JO(春)">
                    </div>
                    <div class="form-group">
                        <label for="memo">メモ</label>
                        <input type="text" id="memo" name="memo" placeholder="任意">
                    </div>
                    <button type="submit" class="btn">記録を追加</button>
                </form>
            </div>

            <div id="analysis" class="tab-content">
                <h2>📈 分析</h2>
                
                <!-- グラフ選択フォーム -->
                <div class="chart-controls" style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3>📊 記録グラフ設定</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="chart-stroke">種目</label>
                            <select id="chart-stroke" onchange="updateChart()">
                                <option value="">種目を選択</option>
                                <option value="バタフライ">バタフライ</option>
                                <option value="自由形">自由形</option>
                                <option value="背泳ぎ">背泳ぎ</option>
                                <option value="平泳ぎ">平泳ぎ</option>
                                <option value="個人メドレー">個人メドレー</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="chart-distance">距離</label>
                            <select id="chart-distance" onchange="updateChart()">
                                <option value="">距離を選択</option>
                                <option value="50">50m</option>
                                <option value="100">100m</option>
                                <option value="200">200m</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="chart-pool">プール</label>
                            <select id="chart-pool" onchange="updateChart()">
                                <option value="">プールを選択</option>
                                <option value="短水路">短水路</option>
                                <option value="長水路">長水路</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- デバッグ情報表示エリア -->
                    <div id="debug-info" style="background: #f0f0f0; padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 12px; display: none;">
                        <strong>デバッグ情報:</strong><br>
                        <span id="debug-content">Chart.js読み込み状況確認中...</span>
                    </div>
                    
                    <button onclick="testChart()" class="btn" style="margin-top: 10px; font-size: 14px;">📊 グラフ機能テスト</button>
                </div>

                <!-- グラフエリア -->
                <div class="chart-container" style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; display: none;">
                    <div style="position: relative; height: 300px; width: 100%;">
                        <canvas id="recordChart"></canvas>
                    </div>
                </div>

                <!-- アドバイスエリア -->
                <div id="advice-section" style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px; margin-bottom: 20px; display: none;">
                    <h3>💪 応援メッセージ</h3>
                    <div id="advice-content"></div>
                </div>

                <div id="analysis-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3 id="butterfly-count">-</h3>
                            <p>バタフライ記録数</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="freestyle-count">-</h3>
                            <p>自由形記録数</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="recent-improvement">-</h3>
                            <p>直近の向上率</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="best-stroke">-</h3>
                            <p>最も得意な種目</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="data-manager" class="tab-content">
                <h2>💾 データ管理</h2>
                <div style="margin-bottom: 20px;">
                    <button class="btn" onclick="exportData()" style="margin-right: 10px;">📥 データエクスポート</button>
                    <button class="btn" onclick="importData()">📤 データインポート</button>
                </div>
                <div style="margin-bottom: 20px;">
                    <button class="btn" onclick="resetData()" style="background: #dc2626;">🔄 データリセット</button>
                </div>
                <div id="data-info">
                    <p>現在のデータ件数: <span id="current-data-count">-</span></p>
                    <p>最終更新: <span id="last-updated">-</span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let records = [];
        let currentTab = 'dashboard';
        let deferredPrompt;

        // 初期データ（170件の水泳記録）
        const initialData = {"records":[{"id":"001","日付":"2025-03-28","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.15","種別":"大会","大会名":"JO(春)","レース":"A-決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"002","日付":"2025-02-23","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.28","種別":"大会","大会名":"兵庫県JO(春)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"003","日付":"2025-02-23","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.35","種別":"大会","大会名":"兵庫県JO(春)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"004","日付":"2025-03-23","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.38","種別":"大会","大会名":"尼崎室内選手権","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"005","日付":"2025-01-25","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.49","種別":"大会","大会名":"兵庫県短水路選手権","レース":"予選","順位":"22位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"006","日付":"2025-03-28","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.62","種別":"大会","大会名":"JO(春)","レース":"予選","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"007","日付":"2025-02-02","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.64","種別":"大会","大会名":"わかやまオープン","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"008","日付":"2025-01-12","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"26.82","種別":"大会","大会名":"新年フェスティバル","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"009","日付":"2025-02-02","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"27","種別":"大会","大会名":"わかやまオープン","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"010","日付":"2025-01-19","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"27.02","種別":"大会","大会名":"兵庫県Jr新春記録会","レース":"タイム決勝","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"011","日付":"2024-12-01","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"27.29","種別":"タイムトライアル","大会名":"兵庫地域冬季トライアル大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"012","日付":"2024-11-03","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"27.6","種別":"大会","大会名":"兵庫県ジュニアスイマーズミート","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"013","日付":"2024-03-28","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"27.91","種別":"大会","大会名":"JO(春)","レース":"予選","順位":"25位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"014","日付":"2024-02-04","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"27.98","種別":"大会","大会名":"わかやまオープン","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"015","日付":"2024-02-24","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"28.11","種別":"大会","大会名":"兵庫県JO(春)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"016","日付":"2024-02-04","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"28.65","種別":"大会","大会名":"わかやまオープン","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"017","日付":"2024-02-24","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"28.66","種別":"大会","大会名":"兵庫県JO(春)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"018","日付":"2024-01-27","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"28.85","種別":"大会","大会名":"兵庫県短水路選手権","レース":"予選","順位":"43位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"019","日付":"2023-12-03","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"29.33","種別":"タイムトライアル","大会名":"兵庫地域冬季トライアル大会","レース":"タイム決勝","順位":"12位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"020","日付":"2023-10-28","種目":"バタフライ","距離":"50","プール":"短水路","タイム":"29.56","種別":"大会","大会名":"兵庫県ジュニアスイマーズミート","レース":"タイム決勝","順位":"18位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"021","日付":"2025-02-24","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"58.63","種別":"大会","大会名":"兵庫県JO(春)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"022","日付":"2025-03-27","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"59.3","種別":"大会","大会名":"JO(春)","レース":"A-決勝","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"023","日付":"2025-02-01","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"59.46","種別":"大会","大会名":"わかやまオープン","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"024","日付":"2025-03-27","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"59.72","種別":"大会","大会名":"JO(春)","レース":"予選","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"025","日付":"2025-01-12","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"59.92","種別":"大会","大会名":"新年フェスティバル","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"026","日付":"2025-02-24","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:00.08","種別":"大会","大会名":"兵庫県JO(春)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"027","日付":"2025-01-26","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:00.46","種別":"大会","大会名":"兵庫県短水路選手権","レース":"予選","順位":"50位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"028","日付":"2025-02-01","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:00.73","種別":"大会","大会名":"わかやまオープン","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"029","日付":"2024-11-04","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:01.07","種別":"大会","大会名":"兵庫県ジュニアスイマーズミート","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"030","日付":"2024-06-30","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:01.23","種別":"大会","大会名":"東大阪地域夏季AB級公認","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"031","日付":"2025-01-19","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:01.34","種別":"大会","大会名":"兵庫県Jr新春記録会","レース":"タイム決勝","順位":"14位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"032","日付":"2024-03-27","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:03.05","種別":"大会","大会名":"JO(春)","レース":"予選","順位":"33位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"033","日付":"2024-02-03","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:03.99","種別":"大会","大会名":"わかやまオープン","レース":"A-決勝","順位":"6位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"034","日付":"2024-02-03","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:04.01","種別":"大会","大会名":"わかやまオープン","レース":"予選","順位":"6位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"035","日付":"2024-02-25","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:04.36","種別":"大会","大会名":"兵庫県JO(春)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"036","日付":"2024-01-14","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:05.79","種別":"大会","大会名":"新年フェスティバル","レース":"タイム決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"037","日付":"2023-12-03","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:05.89","種別":"タイムトライアル","大会名":"兵庫地域冬季トライアル大会","レース":"タイム決勝","順位":"34位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"038","日付":"2023-12-17","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:06.02","種別":"大会","大会名":"兵庫地域A･AA級大会","レース":"タイム決勝","順位":"27位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"039","日付":"2024-02-25","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:07.44","種別":"大会","大会名":"兵庫県JO(春)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"040","日付":"2023-10-29","種目":"バタフライ","距離":"100","プール":"短水路","タイム":"01:08.14","種別":"大会","大会名":"兵庫県ジュニアスイマーズミート","レース":"タイム決勝","順位":"43位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"041","日付":"2024-12-01","種目":"バタフライ","距離":"200","プール":"短水路","タイム":"02:16.85","種別":"タイムトライアル","大会名":"兵庫地域冬季トライアル大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"042","日付":"2025-03-23","種目":"自由形","距離":"50","プール":"短水路","タイム":"25.2","種別":"大会","大会名":"尼崎室内選手権","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"043","日付":"2025-02-02","種目":"自由形","距離":"50","プール":"短水路","タイム":"25.27","種別":"大会","大会名":"わかやまオープン","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"044","日付":"2025-03-28","種目":"自由形","距離":"50","プール":"短水路","タイム":"25.35","種別":"大会","大会名":"JO(春)","レース":"A-決勝","順位":"7位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"045","日付":"2025-02-02","種目":"自由形","距離":"50","プール":"短水路","タイム":"25.51","種別":"大会","大会名":"わかやまオープン","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"046","日付":"2025-03-28","種目":"自由形","距離":"50","プール":"短水路","タイム":"25.56","種別":"大会","大会名":"JO(春)","レース":"予選","順位":"10位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"047","日付":"2025-01-25","種目":"自由形","距離":"50","プール":"短水路","タイム":"26.02","種別":"大会","大会名":"兵庫県短水路選手権","レース":"予選","順位":"76位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"048","日付":"2025-01-19","種目":"自由形","距離":"50","プール":"短水路","タイム":"26.27","種別":"大会","大会名":"兵庫県Jr新春記録会","レース":"タイム決勝","順位":"14位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"049","日付":"2024-06-30","種目":"自由形","距離":"50","プール":"短水路","タイム":"27.53","種別":"大会","大会名":"東大阪地域夏季AB級公認","レース":"タイム決勝","順位":"6位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"050","日付":"2024-02-11","種目":"自由形","距離":"50","プール":"短水路","タイム":"27.88","種別":"大会","大会名":"兵庫県冬季公式記録会","レース":"タイム決勝","順位":"59位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"051","日付":"2024-02-25","種目":"自由形","距離":"50","プール":"短水路","タイム":"28.09","種別":"大会","大会名":"兵庫県JO(春)","レース":"予選","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"052","日付":"2024-01-14","種目":"自由形","距離":"50","プール":"短水路","タイム":"28.17","種別":"大会","大会名":"新年フェスティバル","レース":"タイム決勝","順位":"10位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"053","日付":"2024-01-27","種目":"自由形","距離":"50","プール":"短水路","タイム":"28.3","種別":"大会","大会名":"兵庫県短水路選手権","レース":"予選","順位":"149位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"054","日付":"2023-12-03","種目":"自由形","距離":"50","プール":"短水路","タイム":"28.53","種別":"タイムトライアル","大会名":"兵庫地域冬季トライアル大会","レース":"タイム決勝","順位":"56位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"055","日付":"2024-02-04","種目":"自由形","距離":"50","プール":"短水路","タイム":"28.56","種別":"大会","大会名":"わかやまオープン","レース":"予選","順位":"26位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"056","日付":"2023-10-29","種目":"自由形","距離":"50","プール":"短水路","タイム":"28.86","種別":"大会","大会名":"兵庫県ジュニアスイマーズミート","レース":"タイム決勝","順位":"70位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"057","日付":"2023-12-17","種目":"自由形","距離":"50","プール":"短水路","タイム":"29.09","種別":"大会","大会名":"兵庫地域A･AA級大会","レース":"タイム決勝","順位":"83位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"058","日付":"2023-07-30","種目":"自由形","距離":"50","プール":"短水路","タイム":"29.64","種別":"タイムトライアル","大会名":"兵庫県JOチャレンジ(夏)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"059","日付":"2023-07-30","種目":"自由形","距離":"50","プール":"短水路","タイム":"30.54","種別":"タイムトライアル","大会名":"兵庫県JOチャレンジ(夏)","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"060","日付":"2023-05-14","種目":"自由形","距離":"50","プール":"短水路","タイム":"30.84","種別":"タイムトライアル","大会名":"兵庫地域春季トライアル大会","レース":"タイム決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"061","日付":"2025-02-23","種目":"自由形","距離":"100","プール":"短水路","タイム":"55.75","種別":"大会","大会名":"兵庫県JO(春)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"062","日付":"2025-02-23","種目":"自由形","距離":"100","プール":"短水路","タイム":"56.36","種別":"大会","大会名":"兵庫県JO(春)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"063","日付":"2024-10-27","種目":"自由形","距離":"100","プール":"短水路","タイム":"59.8","種別":"大会","大会名":"尼崎市民選手権","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"064","日付":"2023-12-17","種目":"自由形","距離":"100","プール":"短水路","タイム":"01:03.01","種別":"大会","大会名":"兵庫地域A･AA級大会","レース":"タイム決勝","順位":"98位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"065","日付":"2024-02-11","種目":"自由形","距離":"100","プール":"短水路","タイム":"01:03.92","種別":"大会","大会名":"兵庫県冬季公式記録会","レース":"タイム決勝","順位":"103位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"066","日付":"2025-04-13","種目":"自由形","距離":"200","プール":"短水路","タイム":"02:03.48","種別":"大会","大会名":"北大阪地区A･AA級大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"067","日付":"2024-11-24","種目":"自由形","距離":"200","プール":"短水路","タイム":"02:08.16","種別":"大会","大会名":"兵庫地域A･AA級大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"068","日付":"2024-10-27","種目":"自由形","距離":"200","プール":"短水路","タイム":"02:19.15","種別":"大会","大会名":"尼崎市民選手権","レース":"タイム決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"069","日付":"2024-11-03","種目":"背泳ぎ","距離":"50","プール":"短水路","タイム":"32.44","種別":"大会","大会名":"兵庫県ジュニアスイマーズミート","レース":"タイム決勝","順位":"6位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"070","日付":"2024-06-02","種目":"平泳ぎ","距離":"50","プール":"短水路","タイム":"36.89","種別":"タイムトライアル","大会名":"兵庫地域夏季トライアル大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"071","日付":"2025-04-13","種目":"個人メドレー","距離":"200","プール":"短水路","タイム":"02:20.80","種別":"大会","大会名":"北大阪地区A･AA級大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"072","日付":"2024-11-24","種目":"個人メドレー","距離":"200","プール":"短水路","タイム":"02:22.65","種別":"大会","大会名":"兵庫地域A･AA級大会","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"073","日付":"2024-07-28","種目":"個人メドレー","距離":"200","プール":"短水路","タイム":"02:25.70","種別":"タイムトライアル","大会名":"兵庫県JOチャレンジ(夏)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"074","日付":"2024-06-30","種目":"個人メドレー","距離":"200","プール":"短水路","タイム":"02:31.55","種別":"大会","大会名":"東大阪地域夏季AB級公認","レース":"タイム決勝","順位":"7位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"075","日付":"2024-06-02","種目":"個人メドレー","距離":"200","プール":"短水路","タイム":"02:31.66","種別":"タイムトライアル","大会名":"兵庫地域夏季トライアル大会","レース":"タイム決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"076","日付":"2023-05-14","種目":"個人メドレー","距離":"200","プール":"短水路","タイム":"02:43.95","種別":"タイムトライアル","大会名":"兵庫地域春季トライアル大会","レース":"タイム決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"077","日付":"2025-06-07","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.01","種別":"大会","大会名":"兵庫県選手権","レース":"予選","順位":"22位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"078","日付":"2025-02-08","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.2","種別":"大会","大会名":"きららカップ","レース":"A-決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"079","日付":"2025-02-08","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.37","種別":"大会","大会名":"きららカップ","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"080","日付":"2025-05-17","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.37","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"081","日付":"2025-05-17","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.45","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"082","日付":"2024-11-17","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.55","種別":"大会","大会名":"秋葉山選手権","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"083","日付":"2024-12-19","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.6","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"084","日付":"2024-11-17","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.66","種別":"大会","大会名":"秋葉山選手権","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"085","日付":"2024-07-07","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.68","種別":"大会","大会名":"JO(夏)","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"086","日付":"2024-12-19","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.7","種別":"大会","大会名":"Queensland Championships","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"087","日付":"2024-08-23","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.77","種別":"大会","大会名":"JO(夏)","レース":"B-決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"088","日付":"2024-10-12","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.88","種別":"大会","大会名":"ブロック対抗","レース":"予選","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"089","日付":"2024-08-23","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.94","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"12位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"090","日付":"2024-07-07","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"27.96","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"091","日付":"2024-10-12","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.06","種別":"大会","大会名":"ブロック対抗","レース":"A-決勝","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"092","日付":"2024-06-08","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.68","種別":"大会","大会名":"兵庫県選手権","レース":"予選","順位":"38位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"093","日付":"2024-08-18","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.73","種別":"大会","大会名":"尼崎市民スポーツ祭","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"094","日付":"2024-04-27","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.85","種別":"大会","大会名":"大阪府春季室内","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"095","日付":"2024-05-26","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.9","種別":"大会","大会名":"関西選手権ジュニア","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"096","日付":"2024-05-26","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.91","種別":"大会","大会名":"関西選手権ジュニア","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"097","日付":"2024-05-18","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"28.97","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"A-決勝","順位":"6位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"098","日付":"2024-04-27","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"29.16","種別":"大会","大会名":"大阪府春季室内","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"099","日付":"2024-05-18","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"29.35","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"予選","順位":"7位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"100","日付":"2023-11-19","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"29.68","種別":"大会","大会名":"秋葉山選手権","レース":"A-決勝","順位":"7位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"101","日付":"2023-11-19","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"29.97","種別":"大会","大会名":"秋葉山選手権","レース":"予選","順位":"8位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"102","日付":"2023-08-23","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"30.61","種別":"大会","大会名":"JO(夏)","レース":"A-決勝","順位":"5位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"103","日付":"2023-05-28","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"30.99","種別":"大会","大会名":"関西選手権ジュニア","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"104","日付":"2023-08-23","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"31.01","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"105","日付":"2023-05-20","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"31.7","種別":"大会","大会名":"近畿SC選手権","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"106","日付":"2023-07-09","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"31.74","種別":"大会","大会名":"兵庫県JO(夏)","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"107","日付":"2023-07-09","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"31.96","種別":"大会","大会名":"兵庫県JO(夏)","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"108","日付":"2023-05-28","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"32.18","種別":"大会","大会名":"関西選手権ジュニア","レース":"予選","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"109","日付":"2023-05-20","種目":"バタフライ","距離":"50","プール":"長水路","タイム":"32.48","種別":"大会","大会名":"近畿SC選手権","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"110","日付":"2025-06-08","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"59.69","種別":"大会","大会名":"兵庫県選手権","レース":"予選","順位":"36位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"111","日付":"2025-02-09","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:00.81","種別":"大会","大会名":"きららカップ","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"112","日付":"2024-11-16","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.13","種別":"大会","大会名":"秋葉山選手権","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"113","日付":"2025-05-31","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.17","種別":"大会","大会名":"大阪府春季室内","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"114","日付":"2024-10-13","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.30","種別":"大会","大会名":"ブロック対抗","レース":"タイム決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"115","日付":"2025-02-09","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.43","種別":"大会","大会名":"きららカップ","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"116","日付":"2025-05-18","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.47","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"117","日付":"2025-05-18","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.51","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"118","日付":"2024-11-16","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.67","種別":"大会","大会名":"秋葉山選手権","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"119","日付":"2025-05-31","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.78","種別":"大会","大会名":"大阪府春季室内","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"120","日付":"2024-08-22","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:01.97","種別":"大会","大会名":"JO(夏)","レース":"B-決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"121","日付":"2024-08-22","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:02.19","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"10位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"122","日付":"2024-07-06","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:02.62","種別":"大会","大会名":"JO(夏)","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"123","日付":"2024-12-16","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:02.93","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"124","日付":"2024-06-09","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:03.63","種別":"大会","大会名":"兵庫県選手権","レース":"予選","順位":"58位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"125","日付":"2024-04-29","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:04.03","種別":"大会","大会名":"大阪府春季室内","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"126","日付":"2024-07-06","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:04.17","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"127","日付":"2024-05-25","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:04.33","種別":"大会","大会名":"関西選手権ジュニア","レース":"A-決勝","順位":"6位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"128","日付":"2024-05-25","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:04.79","種別":"大会","大会名":"関西選手権ジュニア","レース":"予選","順位":"5位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"129","日付":"2024-04-29","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:04.95","種別":"大会","大会名":"大阪府春季室内","レース":"A-決勝","順位":"5位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"130","日付":"2024-05-19","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:05.69","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"A-決勝","順位":"4位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"131","日付":"2024-05-19","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:06.84","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"予選","順位":"7位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"132","日付":"2023-05-27","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:13.51","種別":"大会","大会名":"関西選手権ジュニア","レース":"A-決勝","順位":"5位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"133","日付":"2023-05-27","種目":"バタフライ","距離":"100","プール":"長水路","タイム":"01:13.67","種別":"大会","大会名":"関西選手権ジュニア","レース":"予選","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"134","日付":"2025-06-01","種目":"バタフライ","距離":"200","プール":"長水路","タイム":"02:17.81","種別":"大会","大会名":"大阪府春季室内","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"135","日付":"2025-06-01","種目":"バタフライ","距離":"200","プール":"長水路","タイム":"02:17.92","種別":"大会","大会名":"大阪府春季室内","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"136","日付":"2025-06-07","種目":"バタフライ","距離":"200","プール":"長水路","タイム":"02:18.56","種別":"大会","大会名":"兵庫県選手権","レース":"予選","順位":"22位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"137","日付":"2024-12-18","種目":"バタフライ","距離":"200","プール":"長水路","タイム":"02:22.03","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"138","日付":"2024-12-18","種目":"バタフライ","距離":"200","プール":"長水路","タイム":"02:22.66","種別":"大会","大会名":"Queensland Championships","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"139","日付":"2025-06-01","種目":"自由形","距離":"50","プール":"長水路","タイム":"25.99","種別":"大会","大会名":"大阪府春季室内","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"140","日付":"2025-02-09","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.04","種別":"大会","大会名":"きららカップ","レース":"A-決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"141","日付":"2025-06-01","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.16","種別":"大会","大会名":"大阪府春季室内","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"142","日付":"2024-11-17","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.41","種別":"大会","大会名":"秋葉山選手権","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"143","日付":"2024-12-17","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.41","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"144","日付":"2024-12-17","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.53","種別":"大会","大会名":"Queensland Championships","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"145","日付":"2025-02-09","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.58","種別":"大会","大会名":"きららカップ","レース":"予選","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"146","日付":"2024-11-17","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.95","種別":"大会","大会名":"秋葉山選手権","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"147","日付":"2024-10-12","種目":"自由形","距離":"50","プール":"長水路","タイム":"26.99","種別":"大会","大会名":"ブロック対抗","レース":"予選","順位":"5位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"148","日付":"2024-07-06","種目":"自由形","距離":"50","プール":"長水路","タイム":"27.14","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"149","日付":"2024-07-06","種目":"自由形","距離":"50","プール":"長水路","タイム":"27.31","種別":"大会","大会名":"JO(夏)","レース":"A-決勝","順位":"3位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"150","日付":"2024-08-18","種目":"自由形","距離":"50","プール":"長水路","タイム":"27.57","種別":"大会","大会名":"尼崎市民スポーツ祭","レース":"タイム決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"151","日付":"2024-08-23","種目":"自由形","距離":"50","プール":"長水路","タイム":"27.68","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"63位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"152","日付":"2024-10-12","種目":"自由形","距離":"50","プール":"長水路","タイム":"28.3","種別":"大会","大会名":"ブロック対抗","レース":"A-決勝","順位":"10位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"153","日付":"2024-05-19","種目":"自由形","距離":"50","プール":"長水路","タイム":"28.46","種別":"大会","大会名":"近畿SC選手権地区対抗","レース":"予選","順位":"11位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"154","日付":"2024-05-26","種目":"自由形","距離":"50","プール":"長水路","タイム":"28.62","種別":"大会","大会名":"関西選手権ジュニア","レース":"予選","順位":"17位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"155","日付":"2023-05-28","種目":"自由形","距離":"50","プール":"長水路","タイム":"30.43","種別":"大会","大会名":"関西選手権ジュニア","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"156","日付":"2023-05-28","種目":"自由形","距離":"50","プール":"長水路","タイム":"30.52","種別":"大会","大会名":"関西選手権ジュニア","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"157","日付":"2023-08-23","種目":"自由形","距離":"50","プール":"長水路","タイム":"30.64","種別":"大会","大会名":"JO(夏)","レース":"予選","順位":"37位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"158","日付":"2023-05-21","種目":"自由形","距離":"50","プール":"長水路","タイム":"30.89","種別":"大会","大会名":"近畿SC選手権","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"159","日付":"2023-07-08","種目":"自由形","距離":"50","プール":"長水路","タイム":"30.91","種別":"大会","大会名":"兵庫県JO(夏)","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"160","日付":"2023-07-08","種目":"自由形","距離":"50","プール":"長水路","タイム":"30.93","種別":"大会","大会名":"兵庫県JO(夏)","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"161","日付":"2023-05-21","種目":"自由形","距離":"50","プール":"長水路","タイム":"31.79","種別":"大会","大会名":"近畿SC選手権","レース":"A-決勝","順位":"10位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"162","日付":"2024-12-15","種目":"自由形","距離":"200","プール":"長水路","タイム":"02:11.01","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"163","日付":"2024-12-18","種目":"背泳ぎ","距離":"50","プール":"長水路","タイム":"31.57","種別":"大会","大会名":"Queensland Championships","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"164","日付":"2024-12-18","種目":"背泳ぎ","距離":"50","プール":"長水路","タイム":"32.8","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"165","日付":"2024-12-20","種目":"背泳ぎ","距離":"100","プール":"長水路","タイム":"01:09.63","種別":"大会","大会名":"Queensland Championships","レース":"A-決勝","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"166","日付":"2024-12-20","種目":"背泳ぎ","距離":"100","プール":"長水路","タイム":"01:09.76","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"2位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"167","日付":"2024-12-20","種目":"平泳ぎ","距離":"50","プール":"長水路","タイム":"35.6","種別":"大会","大会名":"Queensland Championships","レース":"A-決勝","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"168","日付":"2024-12-20","種目":"平泳ぎ","距離":"50","プール":"長水路","タイム":"35.7","種別":"大会","大会名":"Queensland Championships","レース":"予選","順位":"1位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"169","日付":"2024-04-28","種目":"個人メドレー","距離":"200","プール":"長水路","タイム":"02:38.44","種別":"大会","大会名":"大阪府春季室内","レース":"予選","順位":"12位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"},{"id":"170","日付":"2023-05-20","種目":"個人メドレー","距離":"200","プール":"長水路","タイム":"02:51.56","種別":"大会","大会名":"近畿SC選手権","レース":"タイム決勝","順位":"13位","メモ":"","入力者":"データ移行","更新日時":"2025-07-08T10:00:00Z"}],"metadata":{"source":"swimRecord-250705b.txt","totalRecords":170,"lastUpdated":"2025-07-08T10:00:00Z","version":"1.0.0"}};

        // PWA インストール対応
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-prompt').classList.add('show');
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('PWA installed');
                    }
                    deferredPrompt = null;
                    hideInstallPrompt();
                });
            }
        }

        function hideInstallPrompt() {
            document.getElementById('install-prompt').classList.remove('show');
        }

        // Service Worker 登録
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => console.log('SW registered'))
                .catch(error => console.log('SW registration failed'));
        }

        // データ管理関数
        function loadFromStorage() {
            const stored = localStorage.getItem('swimRecords');
            if (stored) {
                const data = JSON.parse(stored);
                records = data.records || [];
            } else {
                records = initialData.records;
                saveToStorage();
            }
        }

        function saveToStorage() {
            const data = {
                records: records,
                metadata: {
                    totalRecords: records.length,
                    lastUpdated: new Date().toISOString(),
                    version: "1.0.0"
                }
            };
            localStorage.setItem('swimRecords', JSON.stringify(data));
        }

        function generateId() {
            if (records.length === 0) return '001';
            const maxId = Math.max(...records.map(r => parseInt(r.id)));
            return String(maxId + 1).padStart(3, '0');
        }

        // タブ切り替え
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            currentTab = tabName;
            
            if (tabName === 'records') {
                renderRecords();
            } else if (tabName === 'dashboard') {
                updateDashboard();
            } else if (tabName === 'analysis') {
                updateAnalysis();
            } else if (tabName === 'data-manager') {
                updateDataManager();
            }
        }

        // レコード表示
        function renderRecords(filteredRecords = null) {
            const tbody = document.getElementById('records-tbody');
            tbody.innerHTML = '';
            
            const recordsToShow = filteredRecords || records;
            
            recordsToShow.forEach((record, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${record.日付}</td>
                    <td>${record.種目}</td>
                    <td>${record.距離}m</td>
                    <td>${record.プール}</td>
                    <td>${record.タイム}</td>
                    <td>${record.大会名}</td>
                    <td>${record.順位}</td>
                    <td>
                        <button class="btn btn-danger" onclick="deleteRecord('${record.id}')">削除</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // フィルタ機能
        function filterRecords() {
            const strokeFilter = document.getElementById('filter-stroke').value;
            const distanceFilter = document.getElementById('filter-distance').value;
            
            let filtered = records;
            
            if (strokeFilter) {
                filtered = filtered.filter(r => r.種目 === strokeFilter);
            }
            
            if (distanceFilter) {
                filtered = filtered.filter(r => r.距離 === distanceFilter);
            }
            
            renderRecords(filtered);
        }

        // ダッシュボード更新
        function updateDashboard() {
            document.getElementById('total-records').textContent = records.length;
            
            const butterflyRecords = records.filter(r => r.種目 === 'バタフライ' && r.距離 === '50');
            if (butterflyRecords.length > 0) {
                const bestTime = Math.min(...butterflyRecords.map(r => parseFloat(r.タイム)));
                document.getElementById('best-time').textContent = bestTime.toFixed(2) + 's';
            }
            
            const competitions = [...new Set(records.map(r => r.大会名))].filter(c => c);
            document.getElementById('competitions').textContent = competitions.length;
            
            const firstPlaces = records.filter(r => r.順位 === '1位').length;
            document.getElementById('first-places').textContent = firstPlaces;
        }

        // 分析画面更新
        function updateAnalysis() {
            const butterflyCount = records.filter(r => r.種目 === 'バタフライ').length;
            const freestyleCount = records.filter(r => r.種目 === '自由形').length;
            
            document.getElementById('butterfly-count').textContent = butterflyCount;
            document.getElementById('freestyle-count').textContent = freestyleCount;
            
            // 最も得意な種目
            const strokeCounts = {};
            records.forEach(r => {
                strokeCounts[r.種目] = (strokeCounts[r.種目] || 0) + 1;
            });
            
            const bestStroke = Object.keys(strokeCounts).reduce((a, b) => 
                strokeCounts[a] > strokeCounts[b] ? a : b
            );
            document.getElementById('best-stroke').textContent = bestStroke;
            
            // 直近の向上率
            const recentRecords = records
                .filter(r => r.種目 === 'バタフライ' && r.距離 === '50')
                .sort((a, b) => new Date(b.日付) - new Date(a.日付))
                .slice(0, 5);
            
            if (recentRecords.length >= 2) {
                const latest = parseFloat(recentRecords[0].タイム);
                const previous = parseFloat(recentRecords[1].タイム);
                const improvement = ((previous - latest) / previous * 100).toFixed(1);
                document.getElementById('recent-improvement').textContent = improvement + '%';
            } else {
                document.getElementById('recent-improvement').textContent = 'N/A';
            }
        }

        // データ管理画面更新
        function updateDataManager() {
            document.getElementById('current-data-count').textContent = records.length;
            const stored = localStorage.getItem('swimRecords');
            if (stored) {
                const data = JSON.parse(stored);
                document.getElementById('last-updated').textContent = 
                    new Date(data.metadata.lastUpdated).toLocaleString('ja-JP');
            }
        }

        // レコード削除
        function deleteRecord(recordId) {
            if (confirm('この記録を削除しますか？')) {
                records = records.filter(r => r.id !== recordId);
                saveToStorage();
                renderRecords();
                updateDashboard();
            }
        }

        // レコード追加
        document.getElementById('record-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const record = {
                id: generateId(),
                日付: formData.get('date'),
                種目: formData.get('stroke'),
                距離: formData.get('distance'),
                プール: formData.get('pool'),
                タイム: formData.get('time'),
                種別: '大会',
                大会名: formData.get('competition'),
                レース: '',
                順位: formData.get('rank'),
                メモ: formData.get('memo'),
                入力者: 'ユーザー',
                更新日時: new Date().toISOString()
            };
            
            records.push(record);
            saveToStorage();
            alert('記録が追加されました');
            e.target.reset();
            
            if (currentTab === 'records') {
                renderRecords();
            }
            updateDashboard();
        });

        // データエクスポート
        function exportData() {
            const data = {
                records: records,
                metadata: {
                    totalRecords: records.length,
                    lastUpdated: new Date().toISOString(),
                    version: "1.0.0"
                }
            };
            
            const jsonString = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `swim-records-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // データインポート
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (data.records && Array.isArray(data.records)) {
                            records = data.records;
                            saveToStorage();
                            renderRecords();
                            updateDashboard();
                            alert('データをインポートしました');
                        } else {
                            alert('無効なファイル形式です');
                        }
                    } catch (error) {
                        alert('ファイルの読み込みに失敗しました');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // データリセット
        function resetData() {
            if (confirm('全てのデータを初期状態にリセットしますか？この操作は元に戻せません。')) {
                records = initialData.records;
                saveToStorage();
                renderRecords();
                updateDashboard();
                alert('データをリセットしました');
            }
        }

        // 初期化
        document.addEventListener('DOMContentLoaded', () => {
            loadFromStorage();
            updateDashboard();
            
            // 今日の日付をデフォルトに設定
            document.getElementById('date').valueAsDate = new Date();
        });

        // タッチ操作改善
        document.addEventListener('touchstart', function() {}, {passive: true});
        document.addEventListener('touchmove', function() {}, {passive: true});

        // グラフ変数
        let recordChart = null;

        // タイム変換関数（分:秒形式を秒数に変換）
        function parseTimeToSeconds(timeString) {
            if (!timeString) return 0;
            
            // 既に秒数の場合（小数点を含む数値）
            if (/^\d+(\.\d+)?$/.test(timeString)) {
                return parseFloat(timeString);
            }
            
            // 分:秒形式の場合（例: "01:00.08" または "1:30.45"）
            const timeMatch = timeString.match(/^(\d{1,2}):(\d{2})\.?(\d{2})?$/);
            if (timeMatch) {
                const minutes = parseInt(timeMatch[1], 10);
                const seconds = parseInt(timeMatch[2], 10);
                const hundredths = timeMatch[3] ? parseInt(timeMatch[3], 10) : 0;
                return minutes * 60 + seconds + hundredths / 100;
            }
            
            // その他の形式（例: "26.15"）
            return parseFloat(timeString) || 0;
        }

        // 秒数を分:秒形式に変換（表示用）
        function formatSecondsToTime(seconds) {
            if (seconds < 60) {
                return seconds.toFixed(2) + '秒';
            } else {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                return `${minutes}:${remainingSeconds.toFixed(2).padStart(5, '0')}`;
            }
        }

        // デバッグ・テスト関数
        function testChart() {
            const debugDiv = document.getElementById('debug-info');
            const debugContent = document.getElementById('debug-content');
            debugDiv.style.display = 'block';
            
            let debug = '';
            
            // Chart.js の確認
            if (typeof Chart !== 'undefined') {
                debug += '✅ Chart.js 読み込み成功<br>';
                debug += `Chart.js バージョン: ${Chart.version}<br>`;
            } else {
                debug += '❌ Chart.js が読み込まれていません<br>';
            }
            
            // Canvas要素の確認
            const canvas = document.getElementById('recordChart');
            if (canvas) {
                debug += '✅ Canvas要素あり<br>';
                debug += `Canvas サイズ: ${canvas.width}x${canvas.height}<br>`;
            } else {
                debug += '❌ Canvas要素が見つかりません<br>';
            }
            
            // レコードデータの確認
            debug += `📊 総記録数: ${records.length}<br>`;
            debug += `バタフライ50m短水路: ${records.filter(r => r.種目 === 'バタフライ' && r.距離 === '50' && r.プール === '短水路').length}件<br>`;
            
            // 簡単なテストグラフ作成
            if (typeof Chart !== 'undefined') {
                try {
                    // Chart.jsの全インスタンスをクリア
                    Chart.helpers.each(Chart.instances, function(instance) {
                        instance.destroy();
                    });
                    
                    // recordChartをnullに設定
                    recordChart = null;
                    
                    // Canvas要素を完全にリセット
                    const chartContainer = document.querySelector('.chart-container div');
                    chartContainer.innerHTML = '<canvas id="recordChart"></canvas>';
                    
                    const canvas = document.getElementById('recordChart');
                    recordChart = new Chart(canvas.getContext('2d'), {
                        type: 'line',
                        data: {
                            labels: ['1月', '2月', '3月'],
                            datasets: [{
                                label: 'テストデータ',
                                data: [30, 28, 26],
                                borderColor: '#2563eb',
                                tension: 0.1
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                title: {
                                    display: true,
                                    text: 'テストグラフ'
                                }
                            }
                        }
                    });
                    
                    document.querySelector('.chart-container').style.display = 'block';
                    debug += '✅ テストグラフ作成成功！<br>';
                } catch (error) {
                    debug += `❌ グラフ作成エラー: ${error.message}<br>`;
                }
            }
            
            debugContent.innerHTML = debug;
        }

        // グラフ更新関数
        function updateChart() {
            try {
                const stroke = document.getElementById('chart-stroke').value;
                const distance = document.getElementById('chart-distance').value;
                const pool = document.getElementById('chart-pool').value;

                if (!stroke || !distance) {
                    document.querySelector('.chart-container').style.display = 'none';
                    document.getElementById('advice-section').style.display = 'none';
                    return;
                }

                // データフィルタリング
                let filteredRecords = records.filter(record => 
                    record.種目 === stroke && record.距離 === distance
                );

                if (pool) {
                    filteredRecords = filteredRecords.filter(record => record.プール === pool);
                }

                // プール選択に応じて対比データを取得
                let compareRecords = [];
                if (pool === '長水路') {
                    // 長水路選択時は短水路データも取得
                    compareRecords = records.filter(record => 
                        record.種目 === stroke && record.距離 === distance && record.プール === '短水路'
                    );
                } else if (pool === '短水路') {
                    // 短水路選択時は長水路データも取得
                    compareRecords = records.filter(record => 
                        record.種目 === stroke && record.距離 === distance && record.プール === '長水路'
                    );
                }

                if (filteredRecords.length === 0 && compareRecords.length === 0) {
                    document.querySelector('.chart-container').style.display = 'none';
                    document.getElementById('advice-section').style.display = 'none';
                    
                    // データなしメッセージ表示
                    const debugDiv = document.getElementById('debug-info');
                    const debugContent = document.getElementById('debug-content');
                    debugDiv.style.display = 'block';
                    debugContent.innerHTML = `❌ ${stroke} ${distance}m ${pool || 'すべて'} のデータが見つかりません`;
                    return;
                }

                // デバッグ情報を隠す
                document.getElementById('debug-info').style.display = 'none';

                // データソート（日付順）
                filteredRecords.sort((a, b) => new Date(a.日付) - new Date(b.日付));
                compareRecords.sort((a, b) => new Date(a.日付) - new Date(b.日付));

                // グラフデータ準備
                const datasets = [];

                if (filteredRecords.length > 0) {
                    datasets.push({
                        label: `${stroke} ${distance}m (${pool || 'All'})`,
                        data: filteredRecords.map(record => ({
                            x: record.日付,
                            y: parseTimeToSeconds(record.タイム)
                        })),
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        fill: false,
                        tension: 0.1
                    });
                }

                if (compareRecords.length > 0) {
                    const compareLabel = pool === '長水路' ? '短水路参考' : '長水路参考';
                    datasets.push({
                        label: `${stroke} ${distance}m (${compareLabel})`,
                        data: compareRecords.map(record => ({
                            x: record.日付,
                            y: parseTimeToSeconds(record.タイム)
                        })),
                        borderColor: '#dc2626',
                        backgroundColor: 'rgba(220, 38, 38, 0.1)',
                        fill: false,
                        tension: 0.1,
                        borderDash: [5, 5]
                    });
                }

                // グラフ作成
                const success = createChart(datasets);
                
                if (success) {
                    // アドバイス生成
                    generateAdvice(stroke, distance, pool, filteredRecords);

                    // 表示
                    document.querySelector('.chart-container').style.display = 'block';
                    document.getElementById('advice-section').style.display = 'block';
                }
                
            } catch (error) {
                console.error('updateChart エラー:', error);
                const debugDiv = document.getElementById('debug-info');
                const debugContent = document.getElementById('debug-content');
                debugDiv.style.display = 'block';
                debugContent.innerHTML = `❌ グラフ更新エラー: ${error.message}`;
            }
        }

        function createChart(datasets) {
            try {
                // Chart.jsの全インスタンスをクリア
                Chart.helpers.each(Chart.instances, function(instance) {
                    instance.destroy();
                });
                
                // recordChartをnullに設定
                recordChart = null;

                // Canvas要素を完全にリセット
                const chartContainer = document.querySelector('.chart-container div');
                chartContainer.innerHTML = '<canvas id="recordChart"></canvas>';
                
                const canvas = document.getElementById('recordChart');
                const ctx = canvas.getContext('2d');

                recordChart = new Chart(ctx, {
                    type: 'line',
                    data: { datasets },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: '記録推移グラフ'
                            },
                            legend: {
                                display: true
                            }
                        },
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    parser: 'YYYY-MM-DD',
                                    displayFormats: {
                                        day: 'MM/DD',
                                        month: 'YYYY/MM',
                                        year: 'YYYY'
                                    },
                                    tooltipFormat: 'YYYY/MM/DD'
                                },
                                title: {
                                    display: true,
                                    text: '日付'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'タイム'
                                },
                                reverse: false, // 下側ほど小さな値（良いタイム）になるよう修正
                                ticks: {
                                    callback: function(value) {
                                        return formatSecondsToTime(value);
                                    }
                                }
                            }
                        }
                    }
                });
                
                return true;
            } catch (error) {
                console.error('グラフ作成エラー:', error);
                document.getElementById('debug-content').innerHTML += `<br>❌ グラフ作成エラー: ${error.message}`;
                return false;
            }
        }

        function generateAdvice(stroke, distance, pool, records) {
            if (records.length === 0) return;

            const bestTime = Math.min(...records.map(r => parseTimeToSeconds(r.タイム)));
            const latestTime = parseTimeToSeconds(records[records.length - 1].タイム);
            const improvement = records.length > 1 ? 
                parseTimeToSeconds(records[0].タイム) - parseTimeToSeconds(records[records.length - 1].タイム) : 0;

            let advice = `<div style="line-height: 1.6;">`;
            
            // 種目別アドバイス
            const strokeAdvice = {
                'バタフライ': {
                    tips: ['ストリームラインを意識して！', 'キックのタイミングがポイント！', '肩の柔軟性を高めよう！'],
                    motivation: '美しいバタフライで水面を制覇しよう！🦋'
                },
                '自由形': {
                    tips: ['ストローク数をカウントしてみよう！', 'キャッチをしっかりと！', 'ターンのスピードアップを目指そう！'],
                    motivation: 'スピードの王様、自由形で風のように泳ごう！🌊'
                },
                '背泳ぎ': {
                    tips: ['体の軸をまっすぐに！', 'フラッグからの距離感を掴もう！', '腰の位置を高く保とう！'],
                    motivation: '空を見ながら、最高のタイムを目指そう！☁️'
                },
                '平泳ぎ': {
                    tips: ['一掻き一蹴りを大切に！', 'ストリームラインの時間を長く！', 'タイミングが命！'],
                    motivation: '技術の平泳ぎ、美しいフォームで勝負！🐸'
                },
                '個人メドレー': {
                    tips: ['各種目のつなぎを意識して！', 'ペース配分が重要！', '最後まで諦めない心を！'],
                    motivation: 'オールラウンダーの証、IM で総合力を見せつけよう！🏆'
                }
            };

            const currentStroke = strokeAdvice[stroke] || strokeAdvice['自由形'];
            
            advice += `<p><strong>🎯 ${stroke} ${distance}m の分析結果</strong></p>`;
            advice += `<p>📈 ベストタイム: <span style="color: #059669; font-weight: bold;">${formatSecondsToTime(bestTime)}</span></p>`;
            advice += `<p>📊 直近のタイム: <span style="color: #2563eb; font-weight: bold;">${formatSecondsToTime(latestTime)}</span></p>`;
            
            if (improvement > 0) {
                advice += `<p>🚀 総合向上幅: <span style="color: #059669; font-weight: bold;">-${improvement.toFixed(2)}秒</span> すごい成長です！</p>`;
            } else if (improvement < 0) {
                advice += `<p>💪 まだまだ伸びしろがあります！次こそベスト更新だ！</p>`;
            }
            
            advice += `<br><p><strong>💡 ${stroke}のコツ</strong></p>`;
            advice += `<p>・${currentStroke.tips[Math.floor(Math.random() * currentStroke.tips.length)]}</p>`;
            
            advice += `<br><p style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold; margin-top: 15px;">`;
            advice += `${currentStroke.motivation}`;
            advice += `</p>`;
            
            advice += `<p style="text-align: center; margin-top: 10px; color: #666; font-style: italic;">`;
            advice += `練習は裏切らない。今日もベストを尽くそう！✨`;
            advice += `</p>`;
            
            advice += `</div>`;

            document.getElementById('advice-content').innerHTML = advice;
        }
    </script>
</body>
</html>